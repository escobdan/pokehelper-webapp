<!DOCTYPE html>

<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, width=device-width">

        <!-- http://getbootstrap.com/docs/5.3/ -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <!-- https://favicon.io/emoji-favicons/money-bag/ -->
        <link href="/static/favicon.ico" rel="icon">

        <link href="/static/styles.css" rel="stylesheet">

        <title>Pokehelper: {% block title %}{% endblock %}</title>

    </head>

    <body>
        {% block main %}{% endblock %}
    </body>

    <script>
        async function updateData() {
            // Example new data for player and enemy
            const newData = {
                player: {{ player }},
                enemy: {{ enemy }}
            };

            const response = await fetch('/update', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(newData)
            });

            if (response.ok) {
                const result = await response.json();
                updateUI(result.player, result.enemy);
            } else {
                console.error("Failed to update:", response.statusText);
            }
        }

        function updateUI(player, enemy) {
            // Update player UI
            document.getElementById('playerName').innerText = player.name;
            document.getElementById('playerImage').src = player.url;

            // Update enemy UI
            document.getElementById('enemyName').innerText = enemy.name;
            document.getElementById('enemyImage').src = enemy.url;
        }

        setInterval(updateData, 5000);
    </script>

    <footer>
        Daniel Escobar 2024
    </footer>

</html>
